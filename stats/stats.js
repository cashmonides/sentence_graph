///////////// UTILS ///////////
var go_to_stats = function () {
    document.location = "/stats/";
}




/////////// START DUMMY SECTION //////////////

// @dummy 
// below is a dummy id to play with if we can't access any real uid
// megan lee (a high-achieving fifth grader)
var dummy_uid = 'f69498bf-b07e-40dc-b74a-fbb706a89a90';

// @dummy 
// below is dummy data to play with if we can't access any real data
var dummy_data = [{"correct":3,"hints":0,"item":"AMBI%AMPHI","mastery":-0.6666666666666666,"total":3,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"AQU%AQUA","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":8,"hints":0,"item":"ARCH","mastery":0.375,"total":8,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"ARTHR","mastery":-0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"ASTRO%ASTER","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"AUD%AUDI%AUDIO","mastery":-0.25,"total":4,"type":"root","used_all_attempts":0},{"correct":8,"hints":0,"item":"AVI","mastery":0.3333333333333333,"total":9,"type":"root","used_all_attempts":0},{"correct":8,"hints":0,"item":"BI%BIN","mastery":0.375,"total":8,"type":"root","used_all_attempts":0},{"correct":6,"hints":0,"item":"BIO%BI","mastery":0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":8,"hints":0,"item":"CARN","mastery":0.375,"total":8,"type":"root","used_all_attempts":0},{"correct":3,"hints":0,"item":"CEPHAL","mastery":-0.6666666666666666,"total":3,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"CHRON","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":8,"hints":0,"item":"CRAC%CRAT","mastery":0.3,"total":10,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"DEC%DEKA","mastery":-1,"total":4,"type":"root","used_all_attempts":0},{"correct":0,"hints":0,"item":"DU","mastery":-0.8333333333333334,"total":6,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"EXTRA%EXTRO","mastery":-2,"total":2,"type":"root","used_all_attempts":0},{"correct":10,"hints":0,"item":"FIC%FAC%FY","mastery":0.45454545454545453,"total":11,"type":"root","used_all_attempts":0},{"correct":0,"hints":0,"item":"FRACT%FRAG","mastery":-5,"total":1,"type":"root","used_all_attempts":0},{"correct":17,"hints":0,"item":"GASTR","mastery":0.7058823529411765,"total":17,"type":"root","used_all_attempts":0},{"correct":3,"hints":0,"item":"GEO","mastery":-0.6666666666666666,"total":3,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"GON","mastery":-0.25,"total":4,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"HEPT%HEPTA","mastery":-1,"total":3,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"HERB","mastery":-0.25,"total":4,"type":"root","used_all_attempts":0},{"correct":11,"hints":0,"item":"HEX%HEXA","mastery":0.5454545454545454,"total":11,"type":"root","used_all_attempts":0},{"correct":0,"hints":0,"item":"HYDR","mastery":-1.6666666666666667,"total":3,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"IG%IL%IM%IN%IR root 2","mastery":-0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":9,"hints":0,"item":"LOG","mastery":0.4,"total":10,"type":"root","used_all_attempts":0},{"correct":9,"hints":0,"item":"MACRO","mastery":0.4,"total":10,"type":"root","used_all_attempts":0},{"correct":3,"hints":0,"item":"MAGN","mastery":-0.5,"total":4,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"MAL","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":3,"hints":0,"item":"MANIA","mastery":-0.6666666666666666,"total":3,"type":"root","used_all_attempts":0},{"correct":6,"hints":0,"item":"MAR%MARI%MARIN","mastery":0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":3,"hints":0,"item":"MATER%MATR%MATRI","mastery":-0.6666666666666666,"total":3,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"MAX","mastery":-2,"total":2,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"MEDI","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"MEGA","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":7,"hints":0,"item":"METER%METR","mastery":0.2857142857142857,"total":7,"type":"root","used_all_attempts":0},{"correct":13,"hints":0,"item":"MICRO","mastery":0.6153846153846154,"total":13,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"MILL","mastery":-2,"total":2,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"MON%MONO","mastery":-0.25,"total":4,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"MORPH","mastery":-0.25,"total":4,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"MULTI","mastery":-0.1,"total":10,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"NEG","mastery":-1,"total":3,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"NOV","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":7,"hints":0,"item":"OCT%OCTA%OCTO","mastery":0.2857142857142857,"total":7,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"OCUL","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":8,"hints":0,"item":"OMNI","mastery":0.375,"total":8,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"PALE%PALEO","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"PAN","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"PATER%PATR%PATRI","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":13,"hints":0,"item":"PED%POD","mastery":0.6153846153846154,"total":13,"type":"root","used_all_attempts":0},{"correct":9,"hints":0,"item":"PENT%PENTA","mastery":0.4,"total":10,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"PHIL","mastery":-0.14285714285714285,"total":7,"type":"root","used_all_attempts":0},{"correct":6,"hints":0,"item":"PHOB","mastery":0.125,"total":8,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"PHOT%PHOTO","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":6,"hints":0,"item":"POLY","mastery":0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"PORT","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"PRE","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"PROT%PROTO","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"PSEUD%PSEUDO","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":11,"hints":0,"item":"QUAD%QUADR","mastery":0.5454545454545454,"total":11,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"QUART","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":6,"hints":0,"item":"QUIN%QUINT","mastery":0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"SCOP%SCOPE","mastery":-2,"total":2,"type":"root","used_all_attempts":0},{"correct":4,"hints":0,"item":"SEPT","mastery":-0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":5,"hints":0,"item":"SOL","mastery":0,"total":5,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"SOMN%SOMNI","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"SPEC%SPECT%SPIC","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":2,"hints":0,"item":"SUB","mastery":-1.5,"total":2,"type":"root","used_all_attempts":0},{"correct":3,"hints":0,"item":"TERR","mastery":-0.5,"total":4,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"THERM","mastery":-4,"total":1,"type":"root","used_all_attempts":0},{"correct":5,"hints":0,"item":"TRI","mastery":0,"total":5,"type":"root","used_all_attempts":0},{"correct":6,"hints":0,"item":"UN","mastery":0.16666666666666666,"total":6,"type":"root","used_all_attempts":0},{"correct":12,"hints":0,"item":"UNI","mastery":0.5384615384615384,"total":13,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"VAC","mastery":-1.3333333333333333,"total":3,"type":"root","used_all_attempts":0},{"correct":11,"hints":0,"item":"VERTEBR","mastery":0.5454545454545454,"total":11,"type":"root","used_all_attempts":0},{"correct":5,"hints":0,"item":"VID%VIS","mastery":0,"total":6,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"VIV%VIT","mastery":-2,"total":2,"type":"root","used_all_attempts":0},{"correct":7,"hints":0,"item":"VOR%VOUR","mastery":0.2857142857142857,"total":7,"type":"root","used_all_attempts":0},{"correct":8,"hints":0,"item":"XEN%XENO","mastery":0.375,"total":8,"type":"root","used_all_attempts":0},{"correct":1,"hints":0,"item":"acousticophobe","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"acousticophobia","mastery":-1.6666666666666667,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"acrophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"aerophobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"agoraphobe","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"agoraphobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"amphibian","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"anachronism","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"analogy","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"anarchic","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"anarchist","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"anesthesiologist","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"anesthesiology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"animal","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"anthologist","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"anthology","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"anthophile","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"anthropologist","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"anthropology","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"anthropophobe","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"anthropophobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"aquarium","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"aquatic","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"arachnophobe","mastery":-1,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"arachnophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"archaeologist","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"archbishop","mastery":-2.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"archive","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"aristocrat","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"arthritis","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"arthropod","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"arthroscope","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"artificial","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"astrologer","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"astrology","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"audiology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"audiometer","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"audiovisual","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"aviation","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"bacteriology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"benefactor","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"beneficial","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"biannual","mastery":-0.5,"total":4,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"bibliomania","mastery":-2.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"bibliophile","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"bibliophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"bicentennial","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"bicycle","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"bilateral","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"biography","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"biology","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"biosphere","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"biped","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"bisect","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"cacophony","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"cardiologist","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"cardiology","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"carnivorous","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"cephalic","mastery":-1,"total":3,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"certify","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"chronological","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"chronometer","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"chronophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"circumspect","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"clarify","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"claustrophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"cosmetologist","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"cosmologist","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"cosmology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"cryptozoology","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"decagon","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"decathlon","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"december","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"decibel","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"decimate","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"democracy","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"democrat","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"dendrochronologist","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"dendrologist","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"dentophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"dermatologist","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"devour","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"duet","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"duo","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"duplicate","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"encephalitis","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"envision","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":5,"hints":0,"item":"epilogue","mastery":0,"total":5,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"equanimity","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"evacuate","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"evident","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"extraterrestrial","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"extrovert","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"factory","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"falsify","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"fiction","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"gastric","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"gastritis","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"gastronomy","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"gentrification","mastery":-1.6666666666666667,"total":3,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"geology","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"geophile","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"germophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"germophobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"gerontology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"glossophobia","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hemophilia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hemophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"heptameter","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"heptateuch","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"herbal","mastery":-1.3333333333333333,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"herbivore","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"herbivorous","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hexagon","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hexapod","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hydrophobe","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"hydrophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hydrophyte","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hydroponics","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"hygrometer","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"hypnophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"hypnophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"hypothermia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"iatrophobe","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"iatrophobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"identify","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"illegal","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"immobilize","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"immortal","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"inappropriate","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"innovate","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"invertebrate","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"invincible","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"irrational","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"irreformable","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"irresponsible","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"isometric","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"kleptocracy","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"lepidopterophobe","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"macroeconomics","mastery":-1.3333333333333333,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"macromolecule","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"magnate","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"magnificent","mastery":-1,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"magnify","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"malcontent","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"malefactor","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"manufacture","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"matriarch","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"matriarchy","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"maximize","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"maximum","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"megaphone","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"metamorphosis","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"microbe","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"microbiologist","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"microbiology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"microchip","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"microscope","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"mollify","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":4,"hints":0,"item":"monarch","mastery":-0.25,"total":4,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"monarchy","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"monolith","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"multilingual","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"multimedia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"multiple","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"multitasking","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"mummify","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"myrmecophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"myrmecophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"necrology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"negate","mastery":-2.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"neophile","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"neophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"novelty","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"nullify","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"numerology","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"nyctophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"nyctophobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"octogenarian","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"oligarch","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"omnipotent","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"omnivore","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":4,"hints":0,"item":"omnivorous","mastery":-0.25,"total":4,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"oneirophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"ossify","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"osteoarthritis","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"osteology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"pacify","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"paleoanthropology","mastery":-2.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"paleobiologist","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"paleobiology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"paleography","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"paleozoologist","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"paleozoology","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"pandemic","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"panophobe","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"panophobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"patriarchy","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"patricide","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"patriot","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"patronage","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"pedal","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"pedestrian","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"pedicure","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"pentathlon","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"perimeter","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"petrification","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"petrify","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"philanthropist","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"philology","mastery":-2.5,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"philosophy","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"photocopy","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"photogenic","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"photon","mastery":-1,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"photophobia","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"plutocracy","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"plutocrat","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"podium","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"polychrome","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":4,"hints":0,"item":"polyglot","mastery":-0.25,"total":4,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"portable","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"prediction","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"prologue","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"protocol","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"protoplasm","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"pseudoscience","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"psychology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"purification","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"pyrophobe","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"pyrophobia","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"quadrant","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"quantify","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"quart","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"quartet","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"quintet","mastery":-1,"total":3,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"quintuple","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"radiologist","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"ramification","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"ramify","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"renege","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"revivify","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"sclerometer","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"september","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"simplification","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"simplify","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"solar","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"solarium","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"somniloquy","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"somnolent","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"specific","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"specify","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"stellification","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"stratify","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"suburb","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"symmetry","mastery":-1,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"synchronize","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"technologically","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"technology","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"telescope","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"terrific","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"terrify","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"territory","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"testify","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"tetrapod","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"theology","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"thermal","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"thermos","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"toxicology","mastery":-2,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"triangle","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"triathlon","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"triskadekaphobia","mastery":-0.75,"total":4,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"unfair","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"unfriendly","mastery":-1,"total":3,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"unicycle","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":4,"hints":0,"item":"unilateral","mastery":-0.25,"total":4,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"unique","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"unpatriotic","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"vacation","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"verification","mastery":-2.5,"total":2,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"vertebrate","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"vision","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"vulcanology","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":1,"hints":0,"item":"xenogenesis","mastery":-4,"total":1,"type":"word","used_all_attempts":0},{"correct":3,"hints":0,"item":"xenophile","mastery":-0.6666666666666666,"total":3,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"xenophobia","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"zoology","mastery":-5,"total":1,"type":"word","used_all_attempts":0},{"correct":2,"hints":0,"item":"zoophobe","mastery":-1.5,"total":2,"type":"word","used_all_attempts":0},{"correct":0,"hints":0,"item":"zoophobia","mastery":-2.5,"total":2,"type":"word","used_all_attempts":0}];


var get_dummy_uid = function () {
    return dummy_uid;
}


var get_dummy_data = function () {
    return dummy_data;
}


// @dummy
// below is a set of dummy uids
// this is a basic mock-up of what our home database will access
var dummy_uid_map = {
    'john1': 'efefa1fa-86f5-47a5-8e9b-98347e1da043',
    // this uid might be sick
    // 'john2': '4a4eaf89-c300-42d1-a52c-a5969bebef11',
    'john2': '7958863a-dbca-418d-bb95-82c3210ccc49',

    'john3': 'a1607ad1-9b8c-4e77-9512-e69aee89659c',
    'john4': '2e6ef3ba-8896-4082-af7b-70c4f199c5a2',
    'john5': '784060c4-1af8-4126-8787-7232d3dde1c5',
    'john6': '8556d76a-de9b-4562-9cfe-4f4128a070c3',
    'john7': 'da41305a-6ab2-4383-9ff2-081bdb57c59a',
    'john8': '2bd52c70-86be-47e6-b5fd-9d4b3616d171'
}


/////////// END DUMMY SECTION //////////////





/////////////////////// START CALLBACK VERSION ////////////



// WRAPPER FUNCTION
// takes the inputted user name (john1, john2, etc.)
// converts that to uid and sends uid to the core function
var display_accuracy_graph = function () {
    var user_name = el("stats_query_input").value;
    // console.log("user_name inputted = ", user_name);
    var uid;
    if (user_name) {
        if (!dummy_uid_map[user_name]) {
            alert("NO DUMMY UID FOUND WITH THAT NAME");
            return;
        } else {
            uid = dummy_uid_map[user_name];
            get_scores_and_display(uid);
        }
    } else if (!user_name) {
        alert("NO USER NAME ENTERED, CLICK OK TO USE DUMMY UID");
        get_scores_and_display();
    }
}

///// CORE FUNCTION
// takes uid
// runs a persist on this 
// the persist takes a callback (because persist is asynchronous)
// the callback is currently a dummy, but will be a d3 funciton
var get_scores_and_display = function (uid) {
    
    if (!uid) {
        uid = dummy_uid
        console.log("NO uid entered, using dummy uid = ", uid);
    }
    
    console.log("entering master function with uid = ", uid);
    
    
    
    Persist.get(['word_scores', uid], function (x) {
        console.log('entering callback');
        var data = x.val();
        if (!data || (typeof data !== 'object')) {
            console.log('PROBLEM: data undefined or data not an object')
            return;
        }
        
        
        
        // below are averaging functions we can use later or ignore
        // console.log("ABOUT TO AVERAGE");
        // var aggregate_word_score_accuracy = generate_word_score_avg_accuracy(data);
        // aggregate_word_score_accuracy = Math.round(aggregate_word_score_accuracy * 100);
        // console.log("FINISHED AVERAGING");
        // console.log("AVERAGE ACCURACY = ", aggregate_word_score_accuracy);
        
        
        // cleaning up raw data to filter out items that aren't objects
        var filtered_data = values(data).filter(function (x) {
            return typeof x === 'object'
        })
        
        
        // console.log('TYPE OF data_list = ', typeof filtered_data);
        // console.log("DATA_LIST = ", data_list);
        // console.log("DATA_LIST stringified = ", JSON.stringify(filtered_data));
       
        var processed_data = convert_word_score_list_for_d3(filtered_data);
        
        // here is the dummy callback function
        // takes data_list as the input
        // to be replaced by the d3 function
        d3_dummy_callback(processed_data);
        return;
    })}
    
    
// a dummy function, to be replaced by the d3 function    
var d3_dummy_callback = function (data) {
    var div_test_display = el('stats_display');
    div_test_display.innerHTML = JSON.stringify(data);
};




//// CONVERSION
// below are functions which convert the data into an easy to handle form for d3 processing
var convert_word_score_list_for_d3 = function (word_score_list) {
  var output_list = [];
  for (var i = 0; i < word_score_list.length; i++) {
      var item = word_score_list[i];
      // console.log("ITEM STRINGIFIED = ", JSON.stringify(item));
      var d3_display_object = convert_word_score_to_word_and_accuracy(item);
      output_list.push(d3_display_object);
  }  
  return output_list;
};

var convert_word_score_to_word_and_accuracy = function (word_score_object) {
    
    // we start with a word_score_object
    // which we will convert to a word_score_d3_display_object for display in d3
    
    // the word_score_object has the form
    // {"correct":0,"hints":0,"item":"AMBI%AMPHI","mastery":-5,"total":1,"type":"root","used_all_attempts":0
    
    // we want to return something more convenient, with the accuracy calculated
    
    var word = word_score_object['item'];
    // console.log("WORD IN CONVERSION = ", word);
    
    var correct = word_score_object['correct'];
    // console.log("CORRECT IN CONVERSION = ", correct);
    
    var total = word_score_object['total'];
    // console.log("TOTAL IN CONVERSION = ", total);
    
    var word_score_d3_display_object = {
        'word': word,
        'correct': correct,
        'total': total,
        'accuracy_string': null,
        'accuracy_int': null
    };
    
    
    
    var percentage = correct / total;
    var rounded_percentage = Math.floor(percentage * 100)
    var percentage_string = rounded_percentage + '%';
    
    
    word_score_d3_display_object.accuracy_int = rounded_percentage;
    word_score_d3_display_object.accuracy_string = percentage_string;
    
    // console.log("FINAL RESULT OF WORD_SCORE_DISPLAY_OBJECT = ", word_score_d3_display_object);
    return word_score_d3_display_object;
};

    
/////////////////////// callback version above ////////////






/////////////////////// older stuff below /////////////////

var get_word_scores = function () {
    // @dummy non-dummy-line
    // var uid = this.user.uid;
    
    // @dummy dummy-data-line
    var uid = dummy_uid;
    console.log("UID in get_word_scores = ", uid);
    var d = history_data_list(uid);
    console.log("word_score_data in get_word_scores = ", d);
    return d; 
}


var history_data_list = function (uid) {
    console.log('in history data list')
    
    // @dummy non-dummy-line
    // Persist.get(['word_scores', this.user.uid], function (x) {
    
    // @dummy dummy-data-line
    Persist.get(['word_scores', uid], function (x) {
        console.log('entering callback');
        var data = x.val();
        if (!data || (typeof data !== 'object')) {
            console.log('no')
            return;
        }
        
        // raw data
        // console.log("RAW DATA in callback = ", data);
        
        
        
        
        
        console.log("ABOUT TO AVERAGE");
        var aggregate_word_score_accuracy = generate_word_score_avg_accuracy(data);
   
        aggregate_word_score_accuracy = Math.round(aggregate_word_score_accuracy * 100);
        console.log("FINISHED AVERAGING");
        
        
        
        console.log("AVERAGE ACCURACY = ", aggregate_word_score_accuracy);
        
        
        // cleaning up raw data for items that aren't objects
        var data_list = values(data).filter(function (x) {
            return typeof x === 'object'
        })
        
        
        // console.log("DATA_LIST = ", data_list);
        // console.log("DATA_LIST stringified = ", JSON.stringify(data_list));
        
        var div_test_display = el('stats_display');
        div_test_display.innerHTML = "AVERAGE ACCURACY = " + aggregate_word_score_accuracy + '<br>' + JSON.stringify(data_list);
        console.log('TYPE OF data_list = ', typeof data_list);
        return data_list;
    })}
        


var generate_word_score_avg_accuracy = function (data) {
    var accuracy_list = values(data).filter(function (x) {
            return typeof x === 'object'
        }).map(function (data_item) {
            // console.log("AVERAGE WORD SCORE ACCURACY = ", data_item.correct / data_item.total);
            return data_item.correct / data_item.total;
        });
    // console.log("accuracy list = ", accuracy_list);
    var average_accuracy = calculate_word_score_aggregate_accuracy(accuracy_list);
    // console.log("average accuracy = ", average_accuracy);
    return average_accuracy;
}

var calculate_word_score_aggregate_accuracy = function (accuracy_list) {
    var sum = accuracy_list.reduce(add, 0);
    return sum / accuracy_list.length;
}



